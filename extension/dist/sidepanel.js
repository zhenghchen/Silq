import{r as c,j as e,c as A}from"./client.js";const I=["openai","claude","gemini"],K=({savedKeys:s,activeProvider:p,onProviderChange:a})=>{const f=o=>{switch(o){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return o}},n=o=>s.some(d=>d.provider===o);return e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Active AI Model"}),e.jsx("select",{value:p,onChange:o=>a(o.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",backgroundColor:"#ffffff"},children:I.map(o=>{const d=n(o);return e.jsx("option",{value:o,disabled:!d,style:{color:d?"#374151":"#9ca3af"},children:d?f(o):`${f(o)} (No Key)`},o)})})]})},C=()=>{const[s,p]=c.useState([]),[a,f]=c.useState(""),[n,o]=c.useState("openai"),[d,h]=c.useState("openai"),[y,b]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const t=await chrome.storage.local.get(["apiKeys","activeProvider"]);t.apiKeys&&p(t.apiKeys),t.activeProvider&&h(t.activeProvider)}catch(t){console.error("Error loading API keys:",t)}finally{b(!1)}})()},[]);const x=async()=>{if(!a.trim())return;const r={id:Date.now().toString(),provider:n,key:a.trim()},t=[...s,r];p(t),f(""),o("openai");try{await chrome.storage.local.set({apiKeys:t})}catch(l){console.error("Error saving API key:",l)}},u=async r=>{const t=s.filter(l=>l.id!==r);p(t);try{await chrome.storage.local.set({apiKeys:t})}catch(l){console.error("Error deleting API key:",l)}},m=async r=>{h(r);try{await chrome.storage.local.set({activeProvider:r})}catch(t){console.error("Error saving active provider:",t)}},S=r=>{switch(r){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return r}},k=r=>{switch(r){case"openai":return"O";case"claude":return"C";case"gemini":return"G";default:return"?"}},v=r=>{switch(r){case"openai":return"#10a37f";case"claude":return"#d97706";case"gemini":return"#3b82f6";default:return"#6b7280"}},w=r=>r.length<=8?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":`${r.substring(0,4)}â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢${r.substring(r.length-4)}`,i=({apiKey:r,onDelete:t})=>e.jsxs("div",{style:{padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"6px",backgroundColor:v(r.provider),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#ffffff"},children:k(r.provider)}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0",fontSize:"14px",fontWeight:"600",color:"#111827"},children:S(r.provider)}),e.jsx("p",{style:{margin:"0",fontSize:"12px",color:"#6b7280",fontFamily:"monospace"},children:w(r.key)})]})]}),e.jsx("button",{onClick:()=>t(r.id),style:{padding:"6px 12px",border:"1px solid #ef4444",borderRadius:"6px",backgroundColor:"#ffffff",color:"#ef4444",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease"},onMouseOver:l=>{l.currentTarget.style.backgroundColor="#ef4444",l.currentTarget.style.color="#ffffff"},onMouseOut:l=>{l.currentTarget.style.backgroundColor="#ffffff",l.currentTarget.style.color="#ef4444"},children:"Delete"})]});return y?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"},children:e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #7c3aed",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 24px 0",fontSize:"20px",fontWeight:"600",color:"#111827"},children:"API Key Management"}),e.jsx(K,{savedKeys:s,activeProvider:d,onProviderChange:m}),e.jsxs("div",{style:{marginBottom:"32px",padding:"20px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#111827"},children:"Add New API Key"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:"0 0 120px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:"Provider"}),e.jsxs("select",{value:n,onChange:r=>o(r.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",backgroundColor:"#ffffff"},children:[e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"claude",children:"Claude"}),e.jsx("option",{value:"gemini",children:"Gemini"})]})]}),e.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:"API Key"}),e.jsx("input",{type:"password",value:a,onChange:r=>f(r.target.value),placeholder:"Paste your API key here",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",backgroundColor:"#ffffff",boxSizing:"border-box"}})]}),e.jsx("button",{onClick:x,disabled:!a.trim(),style:{padding:"8px 16px",backgroundColor:a.trim()?"#7c3aed":"#f3f4f6",color:a.trim()?"#ffffff":"#9ca3af",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:a.trim()?"pointer":"not-allowed",transition:"all 0.2s ease"},children:"Save Key"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:"600",color:"#111827"},children:"API Keys"}),s.length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#6b7280",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px"},children:e.jsx("p",{style:{margin:"0",fontSize:"14px"},children:"You have no saved API keys."})}):e.jsx("div",{children:s.map(r=>e.jsx(i,{apiKey:r,onDelete:u},r.id))})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},z=()=>{const[s,p]=c.useState("api-keys"),a=[{id:"api-keys",label:"API Keys",icon:"ðŸ”‘"}],f=()=>{switch(s){case"api-keys":return e.jsx(C,{});default:return e.jsx(C,{})}};return e.jsxs("div",{style:{height:"100vh",display:"flex",backgroundColor:"#ffffff",color:"#1f2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif',fontSize:"14px",lineHeight:"1.5"},children:[e.jsxs("div",{style:{width:"220px",flexShrink:0,borderRight:"1px solid #e0e0e0",backgroundColor:"#f9fafb",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#ffffff"},children:e.jsx("h1",{style:{margin:"0",fontSize:"16px",fontWeight:"600",color:"#111827"},children:"Settings"})}),e.jsx("nav",{style:{padding:"8px",flex:"1"},children:a.map(n=>e.jsxs("button",{onClick:()=>p(n.id),style:{width:"100%",padding:"12px 16px",marginBottom:"4px",border:"none",borderRadius:"8px",backgroundColor:s===n.id?"#7c3aed":"transparent",color:s===n.id?"#ffffff":"#374151",fontSize:"14px",fontWeight:s===n.id?"500":"400",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"all 0.2s ease",textAlign:"left"},onMouseOver:o=>{s!==n.id&&(o.currentTarget.style.backgroundColor="#f3f4f6")},onMouseOut:o=>{s!==n.id&&(o.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("span",{style:{fontSize:"16px"},children:n.icon}),n.label]},n.id))})]}),e.jsx("div",{style:{flex:"1",overflowY:"auto",padding:"24px"},children:f()})]})},R=["openai","claude","gemini"],D=({savedKeys:s,activeProvider:p,onProviderChange:a})=>{const f=o=>{switch(o){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return o}},n=o=>s.some(d=>d.provider===o);return e.jsx("select",{value:p,onChange:o=>a(o.target.value),style:{position:"absolute",left:"8px",bottom:"8px",padding:"4px 8px",border:"none",borderRadius:"4px",fontSize:"11px",fontFamily:"inherit",backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#374151",minWidth:"80px",zIndex:1},children:R.map(o=>{const d=n(o);return e.jsx("option",{value:o,disabled:!d,style:{color:d?"#374151":"#9ca3af"},children:d?f(o):`${f(o)} (No Key)`},o)})})},M=()=>{const[s,p]=c.useState([]),[a,f]=c.useState(""),[n,o]=c.useState(!1),[d,h]=c.useState("chat"),[y,b]=c.useState([]),[x,u]=c.useState(""),m=c.useRef(null),S=c.useRef(null),k=()=>{var i;(i=m.current)==null||i.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{k()},[s]),c.useEffect(()=>{(async()=>{try{const t=await chrome.storage.local.get(["apiKeys","activeProvider"]);t.apiKeys&&(b(t.apiKeys),t.apiKeys.length>0&&!t.activeProvider?u(t.apiKeys[0].provider):t.activeProvider&&u(t.activeProvider))}catch(t){console.error("Error loading API keys:",t)}})();const r=t=>{t.apiKeys&&(b(t.apiKeys.newValue||[]),t.apiKeys.newValue&&t.apiKeys.newValue.length>0?t.apiKeys.newValue.some(g=>g.provider===x)||u(t.apiKeys.newValue[0].provider):u("")),t.activeProvider&&u(t.activeProvider.newValue||"")};return chrome.storage.onChanged.addListener(r),()=>{chrome.storage.onChanged.removeListener(r)}},[x]);const v=async i=>{if(i.preventDefault(),!a.trim()||n)return;const r={id:Date.now().toString(),role:"user",content:a.trim(),timestamp:new Date};p(l=>[...l,r]),f(""),o(!0);const t=y.find(l=>l.provider===x);if(!t){const l=j=>{switch(j){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return j}},g={id:(Date.now()+1).toString(),role:"assistant",content:`API key for ${l(x)} not found. Please add an API key in the settings.`,timestamp:new Date};p(j=>[...j,g]),o(!1);return}console.log("Provider:",x),console.log("API Key:",t.key),setTimeout(()=>{const l={id:(Date.now()+1).toString(),role:"assistant",content:`Using ${x} API. This is a placeholder response. The AI API integration will be added next.`,timestamp:new Date};p(g=>[...g,l]),o(!1)},1e3)},w=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),v(i))};return e.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",color:"#1f2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif',fontSize:"14px",lineHeight:"1.5"},children:[e.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("img",{src:"icons/logo-header.png",style:{width:"24px",height:"24px"}})}),e.jsx("button",{onClick:()=>h(d==="chat"?"settings":"chat"),style:{padding:"8px",border:"none",borderRadius:"6px",backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseOver:i=>i.currentTarget.style.backgroundColor="#f3f4f6",onMouseOut:i=>i.currentTarget.style.backgroundColor="transparent",children:d==="chat"?e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}):e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})})]}),d==="chat"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:"1",overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"16px"},children:[s.length===0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280",textAlign:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:"icons/logo-welcome.png",style:{width:"48px",height:"48px"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"16px",color:"#111827"},children:"Welcome to Silq AI"}),e.jsx("p",{style:{margin:"0",fontSize:"14px"},children:"Your AI-powered writing assistant"})]})]}),s.map(i=>e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:e.jsxs("div",{style:{alignSelf:i.role==="user"?"flex-end":"flex-start",maxWidth:"85%"},children:[e.jsx("div",{style:{backgroundColor:i.role==="user"?"#7c3aed":"#f3f4f6",color:i.role==="user"?"#ffffff":"#374151",borderRadius:"12px",padding:"8px 12px",border:i.role==="user"?"none":"1px solid #e5e7eb"},children:e.jsx("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",lineHeight:"1.5",fontSize:"14px"},children:i.content})}),e.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"4px",textAlign:i.role==="user"?"right":"left",paddingLeft:i.role==="user"?"0":"4px",paddingRight:i.role==="user"?"4px":"0"},children:i.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},i.id)),n&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:e.jsx("div",{style:{alignSelf:"flex-start",maxWidth:"85%"},children:e.jsxs("div",{style:{backgroundColor:"#f3f4f6",borderRadius:"12px",padding:"8px 12px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid #d1d5db",borderTop:"2px solid #7c3aed",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Thinking..."})]})})}),e.jsx("div",{ref:m})]}),e.jsx("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},children:e.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{position:"relative",border:"1px solid #d1d5db",borderRadius:"8px",backgroundColor:"#ffffff",transition:"border-color 0.2s ease"},children:[e.jsx(D,{savedKeys:y,activeProvider:x,onProviderChange:u}),e.jsx("textarea",{ref:S,value:a,onChange:i=>f(i.target.value),onKeyDown:w,placeholder:"Ask me anything about your writing...",disabled:n,style:{width:"100%",minHeight:"44px",maxHeight:"120px",padding:"12px 16px",backgroundColor:"transparent",border:"none",outline:"none",color:"#374151",fontSize:"14px",lineHeight:"1.5",resize:"none",fontFamily:"inherit",boxSizing:"border-box"}}),e.jsx("button",{type:"submit",disabled:!a.trim()||n,style:{position:"absolute",right:"8px",bottom:"8px",width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:a.trim()&&!n?"#7c3aed":"#f3f4f6",color:a.trim()&&!n?"white":"#9ca3af",cursor:a.trim()&&!n?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",transition:"background-color 0.2s ease"},children:"â†’"})]}),e.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",textAlign:"center"},children:"Press Enter to send, Shift+Enter for new line"})]})})]}):e.jsx(z,{}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},P=document.getElementById("root");P&&A(P).render(e.jsx(M,{}));
