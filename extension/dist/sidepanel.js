import{r as d,j as e,c as C}from"./client.js";const A=["openai","claude","gemini"],I=({savedKeys:i,activeProvider:f,onProviderChange:s})=>{const c=r=>{switch(r){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return r}},n=r=>i.some(a=>a.provider===r);return e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Active AI Model"}),e.jsx("select",{value:f,onChange:r=>s(r.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",backgroundColor:"#ffffff"},children:A.map(r=>{const a=n(r);return e.jsx("option",{value:r,disabled:!a,style:{color:a?"#374151":"#9ca3af"},children:a?c(r):`${c(r)} (No Key)`},r)})})]})},k=()=>{const[i,f]=d.useState([]),[s,c]=d.useState(""),[n,r]=d.useState("openai"),[a,x]=d.useState("openai"),[y,b]=d.useState(!0);d.useEffect(()=>{(async()=>{try{const l=await chrome.storage.local.get(["apiKeys","activeProvider"]);l.apiKeys&&f(l.apiKeys),l.activeProvider&&x(l.activeProvider)}catch(l){console.error("Error loading API keys:",l)}finally{b(!1)}})()},[]);const m=async()=>{if(!s.trim())return;const t={id:Date.now().toString(),provider:n,key:s.trim()},l=[...i,t];f(l),c(""),r("openai");try{await chrome.storage.local.set({apiKeys:l})}catch(p){console.error("Error saving API key:",p)}},u=async t=>{const l=i.filter(p=>p.id!==t);f(l);try{await chrome.storage.local.set({apiKeys:l})}catch(p){console.error("Error deleting API key:",p)}},g=async t=>{x(t);try{await chrome.storage.local.set({activeProvider:t})}catch(l){console.error("Error saving active provider:",l)}},v=t=>{switch(t){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return t}},j=t=>{switch(t){case"openai":return"O";case"claude":return"C";case"gemini":return"G";default:return"?"}},h=t=>{switch(t){case"openai":return"#10a37f";case"claude":return"#d97706";case"gemini":return"#3b82f6";default:return"#6b7280"}},S=t=>t.length<=8?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":`${t.substring(0,4)}â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢${t.substring(t.length-4)}`,o=({apiKey:t,onDelete:l})=>e.jsxs("div",{style:{padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"6px",backgroundColor:h(t.provider),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"#ffffff"},children:j(t.provider)}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0",fontSize:"14px",fontWeight:"600",color:"#111827"},children:v(t.provider)}),e.jsx("p",{style:{margin:"0",fontSize:"12px",color:"#6b7280",fontFamily:"monospace"},children:S(t.key)})]})]}),e.jsx("button",{onClick:()=>l(t.id),style:{padding:"6px 12px",border:"1px solid #ef4444",borderRadius:"6px",backgroundColor:"#ffffff",color:"#ef4444",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease"},onMouseOver:p=>{p.currentTarget.style.backgroundColor="#ef4444",p.currentTarget.style.color="#ffffff"},onMouseOut:p=>{p.currentTarget.style.backgroundColor="#ffffff",p.currentTarget.style.color="#ef4444"},children:"Delete"})]});return y?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"},children:e.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #7c3aed",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 24px 0",fontSize:"20px",fontWeight:"600",color:"#111827"},children:"API Key Management"}),e.jsx(I,{savedKeys:i,activeProvider:a,onProviderChange:g}),e.jsxs("div",{style:{marginBottom:"32px",padding:"20px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#111827"},children:"Add New API Key"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:"0 0 120px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:"Provider"}),e.jsxs("select",{value:n,onChange:t=>r(t.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",backgroundColor:"#ffffff"},children:[e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"claude",children:"Claude"}),e.jsx("option",{value:"gemini",children:"Gemini"})]})]}),e.jsxs("div",{style:{flex:"1",minWidth:"0"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:"API Key"}),e.jsx("input",{type:"password",value:s,onChange:t=>c(t.target.value),placeholder:"Paste your API key here",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontFamily:"inherit",backgroundColor:"#ffffff",boxSizing:"border-box"}})]}),e.jsx("button",{onClick:m,disabled:!s.trim(),style:{padding:"8px 16px",backgroundColor:s.trim()?"#7c3aed":"#f3f4f6",color:s.trim()?"#ffffff":"#9ca3af",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:s.trim()?"pointer":"not-allowed",transition:"all 0.2s ease"},children:"Save Key"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:"600",color:"#111827"},children:"API Keys"}),i.length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#6b7280",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px"},children:e.jsx("p",{style:{margin:"0",fontSize:"14px"},children:"You have no saved API keys."})}):e.jsx("div",{children:i.map(t=>e.jsx(o,{apiKey:t,onDelete:u},t.id))})]}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},K=()=>{const[i,f]=d.useState("api-keys"),s=[{id:"api-keys",label:"API Keys",icon:"ðŸ”‘"}],c=()=>{switch(i){case"api-keys":return e.jsx(k,{});default:return e.jsx(k,{})}};return e.jsxs("div",{style:{height:"100vh",display:"flex",backgroundColor:"#ffffff",color:"#1f2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif',fontSize:"14px",lineHeight:"1.5"},children:[e.jsxs("div",{style:{width:"220px",flexShrink:0,borderRight:"1px solid #e0e0e0",backgroundColor:"#f9fafb",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#ffffff"},children:e.jsx("h1",{style:{margin:"0",fontSize:"16px",fontWeight:"600",color:"#111827"},children:"Settings"})}),e.jsx("nav",{style:{padding:"8px",flex:"1"},children:s.map(n=>e.jsxs("button",{onClick:()=>f(n.id),style:{width:"100%",padding:"12px 16px",marginBottom:"4px",border:"none",borderRadius:"8px",backgroundColor:i===n.id?"#7c3aed":"transparent",color:i===n.id?"#ffffff":"#374151",fontSize:"14px",fontWeight:i===n.id?"500":"400",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",transition:"all 0.2s ease",textAlign:"left"},onMouseOver:r=>{i!==n.id&&(r.currentTarget.style.backgroundColor="#f3f4f6")},onMouseOut:r=>{i!==n.id&&(r.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("span",{style:{fontSize:"16px"},children:n.icon}),n.label]},n.id))})]}),e.jsx("div",{style:{flex:"1",overflowY:"auto",padding:"24px"},children:c()})]})},P=["openai","claude","gemini"],z=({savedKeys:i,activeProvider:f,onProviderChange:s})=>{const c=r=>{switch(r){case"openai":return"OpenAI";case"claude":return"Claude";case"gemini":return"Gemini";default:return r}},n=r=>i.some(a=>a.provider===r);return e.jsx("select",{value:f,onChange:r=>s(r.target.value),style:{position:"absolute",left:"8px",bottom:"8px",padding:"4px 8px",border:"none",borderRadius:"4px",fontSize:"11px",fontFamily:"inherit",backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#374151",minWidth:"80px",zIndex:1},children:P.map(r=>{const a=n(r);return e.jsx("option",{value:r,disabled:!a,style:{color:a?"#374151":"#9ca3af"},children:a?c(r):`${c(r)} (No Key)`},r)})})},R=()=>{const[i,f]=d.useState([]),[s,c]=d.useState(""),[n,r]=d.useState(!1),[a,x]=d.useState("chat"),[y,b]=d.useState([]),[m,u]=d.useState(""),g=d.useRef(null),v=d.useRef(null),j=()=>{var o;(o=g.current)==null||o.scrollIntoView({behavior:"smooth"})};d.useEffect(()=>{j()},[i]),d.useEffect(()=>{(async()=>{try{const t=await chrome.storage.local.get(["apiKeys"]);t.apiKeys&&(b(t.apiKeys),t.apiKeys.length>0&&u(t.apiKeys[0].provider))}catch(t){console.error("Error loading API keys:",t)}})()},[]);const h=async o=>{if(o.preventDefault(),!s.trim()||n)return;const t={id:Date.now().toString(),role:"user",content:s.trim(),timestamp:new Date};f(l=>[...l,t]),c(""),r(!0),setTimeout(()=>{const l={id:(Date.now()+1).toString(),role:"assistant",content:"This is a placeholder response. The AI API integration will be added next.",timestamp:new Date};f(p=>[...p,l]),r(!1)},1e3)},S=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),h(o))};return e.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",color:"#1f2937",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif',fontSize:"14px",lineHeight:"1.5"},children:[e.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("img",{src:"icons/logo-header.png",style:{width:"24px",height:"24px"}})}),e.jsx("button",{onClick:()=>x(a==="chat"?"settings":"chat"),style:{padding:"8px",border:"none",borderRadius:"6px",backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseOver:o=>o.currentTarget.style.backgroundColor="#f3f4f6",onMouseOut:o=>o.currentTarget.style.backgroundColor="transparent",children:a==="chat"?e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}):e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})})]}),a==="chat"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:"1",overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"16px"},children:[i.length===0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280",textAlign:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("img",{src:"icons/logo-welcome.png",style:{width:"48px",height:"48px"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"16px",color:"#111827"},children:"Welcome to Silq AI"}),e.jsx("p",{style:{margin:"0",fontSize:"14px"},children:"Your AI-powered writing assistant"})]})]}),i.map(o=>e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:e.jsxs("div",{style:{alignSelf:o.role==="user"?"flex-end":"flex-start",maxWidth:"85%"},children:[e.jsx("div",{style:{backgroundColor:o.role==="user"?"#7c3aed":"#f3f4f6",color:o.role==="user"?"#ffffff":"#374151",borderRadius:"12px",padding:"8px 12px",border:o.role==="user"?"none":"1px solid #e5e7eb"},children:e.jsx("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",lineHeight:"1.5",fontSize:"14px"},children:o.content})}),e.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"4px",textAlign:o.role==="user"?"right":"left",paddingLeft:o.role==="user"?"0":"4px",paddingRight:o.role==="user"?"4px":"0"},children:o.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},o.id)),n&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:e.jsx("div",{style:{alignSelf:"flex-start",maxWidth:"85%"},children:e.jsxs("div",{style:{backgroundColor:"#f3f4f6",borderRadius:"12px",padding:"8px 12px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid #d1d5db",borderTop:"2px solid #7c3aed",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("span",{style:{color:"#6b7280",fontSize:"14px"},children:"Thinking..."})]})})}),e.jsx("div",{ref:g})]}),e.jsx("div",{style:{padding:"16px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},children:e.jsxs("form",{onSubmit:h,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{style:{position:"relative",border:"1px solid #d1d5db",borderRadius:"8px",backgroundColor:"#ffffff",transition:"border-color 0.2s ease"},children:[e.jsx(z,{savedKeys:y,activeProvider:m,onProviderChange:u}),e.jsx("textarea",{ref:v,value:s,onChange:o=>c(o.target.value),onKeyDown:S,placeholder:"Ask me anything about your writing...",disabled:n,style:{width:"100%",minHeight:"44px",maxHeight:"120px",padding:"12px 16px",backgroundColor:"transparent",border:"none",outline:"none",color:"#374151",fontSize:"14px",lineHeight:"1.5",resize:"none",fontFamily:"inherit",boxSizing:"border-box"}}),e.jsx("button",{type:"submit",disabled:!s.trim()||n,style:{position:"absolute",right:"8px",bottom:"8px",width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:s.trim()&&!n?"#7c3aed":"#f3f4f6",color:s.trim()&&!n?"white":"#9ca3af",cursor:s.trim()&&!n?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",transition:"background-color 0.2s ease"},children:"â†’"})]}),e.jsx("div",{style:{fontSize:"11px",color:"#9ca3af",textAlign:"center"},children:"Press Enter to send, Shift+Enter for new line"})]})})]}):e.jsx(K,{}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},w=document.getElementById("root");w&&C(w).render(e.jsx(R,{}));
